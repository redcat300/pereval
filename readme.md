# Pereval Project
ФСТР заказала студентам SkillFactory разработать мобильное приложение для Android и IOS, которое упростило бы туристам задачу по отправке данных о перевале и сократило время обработки запроса до трёх дней.
Pereval Project — это веб-приложение для работы с перевалами, включающее функциональность для добавления, редактирования и получения данных о перевалах, с использованием базы данных PostgreSQL и FastAPI.

## Описание

Проект предоставляет API для работы с данными перевалов, включая создание, получение, обновление записей. Пользователи могут добавлять информацию о перевале, обновлять её в случае необходимости и запрашивать данные о перевале по его идентификатору.

Основные функциональные возможности:
Внесение информации о новом объекте (перевале) в карточку объекта.
Редактирование в приложении неотправленных на сервер ФСТР данных об объектах. На перевале не всегда работает Интернет.
Заполнение ФИО и контактных данных (телефон и электронная почта) с последующим их автозаполнением при внесении данных о новых объектах.
Отправка данных на сервер ФСТР.
Получение уведомления о статусе отправки (успешно/неуспешно).
Согласие пользователя с политикой обработки персональных данных в случае нажатия на кнопку «Отправить» при отправке данных на сервер.


Пользователь с помощью мобильного приложения будет передавать в ФСТР следующие данные о перевале:
- координаты перевала и его высота;
- имя пользователя;
- почта и телефон пользователя;
- название перевала;
- несколько фотографий перевала.

## Стек технологий

- **FastAPI** — для создания веб-приложения и API
- **SQLAlchemy** — ORM для работы с базой данных PostgreSQL
- **PostgreSQL** — база данных для хранения информации о перевалах
- **Pydantic** — для валидации данных

## Установка

1. Клонировать репозиторий: ```bash git clone https://github.com/redcat300/pereval.git 
2. Перейти в каталог проекта: bash Копировать код cd pereval 
3. Установить зависимости: Используйте Poetry для установки зависимостей: bash Копировать код 
poetry install Если не используете Poetry, то можно установить зависимости через pip: bash 
Копировать код pip install -r requirements.txt 
4. Настроить базу данных Для работы с базой данных PostgreSQL, создайте базу данных и настройте
подключение в файле database.py. Пример подключения: python 
Копировать код DATABASE_URL = "postgresql://user:password@localhost:5432/pereval_database" 
5. Запуск проекта Для запуска проекта используйте команду: bash Копировать код uvicorn main:app --reload 6.
Миграции базы данных Для создания таблиц в базе данных используйте: bash Копировать код python -m alembic upgrade head


Описание API методов 
1. POST /submitData
Описание: Добавление новой записи о перевале.

Тело запроса:
{
    "beauty_title": "Красивое название перевала",
    "title": "Обычное название перевала",
    "other_titles": "Другие названия",
    "connect": "Контактные данные",
    "add_time": "2024-12-01T10:00:00",
    "coords": {
        "lat": 55.7558,
        "lon": 37.6173
    },
    "level": "easy",
    "user": {
        "fam": "Иванов",
        "name": "Иван",
        "otc": "Иванович",
        "email": "ivanov@example.com",
        "phone": "+7(123)456-78-90"
    },
    "images": ["image1.jpg", "image2.jpg"],
    "status": "new"
}
Ответ:
{
    "id": 1,
    "beauty_title": "Красивое название перевала",
    "title": "Обычное название перевала",
    "other_titles": "Другие названия",
    "connect": "Контактные данные",
    "add_time": "2024-12-01T10:00:00",
    "coords": {
        "lat": 55.7558,
        "lon": 37.6173
    },
    "level": "easy",
    "user": {
        "fam": "Иванов",
        "name": "Иван",
        "otc": "Иванович",
        "email": "ivanov@example.com",
        "phone": "+7(123)456-78-90"
    },
    "images": ["image1.jpg", "image2.jpg"],
    "status": "new"
}

2. GET /submitData/{id}
Описание: Получить информацию о перевале по его ID.
Запрос: 1
Ответ:
{
    "id": 1,
    "beauty_title": "Красивое название перевала",
    "title": "Обычное название перевала",
    "other_titles": "Другие названия",
    "connect": "Контактные данные",
    "add_time": "2024-12-01T10:00:00",
    "coords": {
        "lat": 55.7558,
        "lon": 37.6173
    },
    "level": "easy",
    "user": {
        "fam": "Иванов",
        "name": "Иван",
        "otc": "Иванович",
        "email": "ivanov@example.com",
        "phone": "+7(123)456-78-90"
    },
    "images": ["image1.jpg", "image2.jpg"],
    "status": "new"
}

3. PATCH /submitData/{id}
Описание: Редактировать существующую запись о перевале, если её статус — new. Не допускается изменение данных пользователя (ФИО, email, телефон).

Тело запроса:
{
    "beauty_title": "Новое красивое название",
    "title": "Новое обычное название",
    "other_titles": "Новые другие названия",
    "connect": "Новые контактные данные",
    "add_time": "2024-12-02T12:00:00",
    "coords": {
        "lat": 55.7558,
        "lon": 37.6173
    },
    "level": "medium",
    "status": "new"
}


Ответ:
{
    "state": 1,
    "message": "Запись успешно обновлена"
}
Ошибка:
{
    "state": 0,
    "message": "Ошибка обновления записи. Запись не найдена или статус не 'new'."
}

4. GET /submitData
Описание: Получить список всех перевалов по email пользователя.

Параметры запроса:

user_email: email пользователя
Ответ:
[
    {
        "id": 1,
        "beauty_title": "Красивое название перевала",
        "title": "Обычное название перевала",
        "other_titles": "Другие названия",
        "connect": "Контактные данные",
        "add_time": "2024-12-01T10:00:00",
        "coords": {
            "lat": 55.7558,
            "lon": 37.6173
        },
        "level": "easy",
        "user": {
            "fam": "Иванов",
            "name": "Иван",
            "otc": "Иванович",
            "email": "ivanov@example.com",
            "phone": "+7(123)456-78-90"
        },
        "images": ["image1.jpg", "image2.jpg"],
        "status": "new"
    }
]


### Пояснения:
- **Описание проекта** даёт общее представление о функционале приложения.
- **Стек технологий** описывает используемые инструменты.
- **Инструкции по установке** дают пошаговую информацию для запуска проекта.
- **API документация** предоставляет описание всех доступных эндпоинтов с примерами запросов и ответов.

Этот файл можно дополнить в зависимости от особенностей вашего проекта и необходимых уточнений.

Если у вас есть вопросы, предложения или улучшения, вы можете связаться с нами по gavrilovvikt0303@gmail.com.
